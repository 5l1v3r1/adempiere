<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Migrations>
  <Migration EntityType="D" Name="Add Inprovement for Transaction Type #1678" ReleaseNo="3.9.1" SeqNo="16">
    <Comments>See: https://github.com/adempiere/adempiere/issues/1678</Comments>
    <Step SeqNo="10" StepType="AD">
      <PO AD_Table_ID="102" Action="I" Record_ID="54044" Table="AD_Reference">
        <Data AD_Column_ID="556" Column="Updated">2018-05-07 16:30:56.315</Data>
        <Data AD_Column_ID="553" Column="IsActive">true</Data>
        <Data AD_Column_ID="554" Column="Created">2018-05-07 16:30:56.315</Data>
        <Data AD_Column_ID="139" Column="ValidationType">T</Data>
        <Data AD_Column_ID="132" Column="Help" isNewNull="true"/>
        <Data AD_Column_ID="54355" Column="IsOrderByValue">false</Data>
        <Data AD_Column_ID="1180" Column="VFormat" isNewNull="true"/>
        <Data AD_Column_ID="130" Column="Name">RelType C_Invoice =&gt; FM_Batch_ID Batchs</Data>
        <Data AD_Column_ID="131" Column="Description">Finds Batchs from Invoice</Data>
        <Data AD_Column_ID="129" Column="AD_Reference_ID">54044</Data>
        <Data AD_Column_ID="363" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="364" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="6486" Column="EntityType">FMS</Data>
        <Data AD_Column_ID="557" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="555" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84393" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="20" StepType="AD">
      <PO AD_Table_ID="126" Action="I" Record_ID="0" Table="AD_Reference_Trl">
        <Data AD_Column_ID="280" Column="Name">RelType C_Invoice =&gt; FM_Batch_ID Batchs</Data>
        <Data AD_Column_ID="666" Column="IsActive">true</Data>
        <Data AD_Column_ID="667" Column="Created">2018-05-07 16:31:00.442</Data>
        <Data AD_Column_ID="669" Column="Updated">2018-05-07 16:31:00.442</Data>
        <Data AD_Column_ID="283" Column="IsTranslated">false</Data>
        <Data AD_Column_ID="281" Column="Description">Finds Batchs from Invoice</Data>
        <Data AD_Column_ID="282" Column="Help" isNewNull="true"/>
        <Data AD_Column_ID="1203" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="1202" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="670" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="279" Column="AD_Language">es_MX</Data>
        <Data AD_Column_ID="278" Column="AD_Reference_ID">54044</Data>
        <Data AD_Column_ID="668" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84394" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="30" StepType="AD">
      <PO AD_Table_ID="103" Action="I" Record_ID="54044" Table="AD_Ref_Table">
        <Data AD_Column_ID="559" Column="Created">2018-05-07 16:40:08.675</Data>
        <Data AD_Column_ID="561" Column="Updated">2018-05-07 16:40:08.675</Data>
        <Data AD_Column_ID="558" Column="IsActive">true</Data>
        <Data AD_Column_ID="2377" Column="IsValueDisplayed">false</Data>
        <Data AD_Column_ID="147" Column="OrderByClause" isNewNull="true"/>
        <Data AD_Column_ID="146" Column="WhereClause">EXISTS(SELECT 1 FROM FM_Transaction t
       INNER JOIN C_InvoiceLine il ON(il.C_InvoiceLine_ID = t.C_InvoiceLine_ID)
       WHERE t.FM_Batch_ID = FM_Batch.FM_Batch_ID
	   AND il.C_Invoice_ID = @C_Invoice_ID@)</Data>
        <Data AD_Column_ID="62120" Column="IsAlert">false</Data>
        <Data AD_Column_ID="62121" Column="DisplaySQL" isNewNull="true"/>
        <Data AD_Column_ID="62122" Column="IsDisplayIdentifier">false</Data>
        <Data AD_Column_ID="145" Column="AD_Display">87242</Data>
        <Data AD_Column_ID="7711" Column="EntityType">FMS</Data>
        <Data AD_Column_ID="367" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="368" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="143" Column="AD_Table_ID">54370</Data>
        <Data AD_Column_ID="57270" Column="AD_Window_ID">53577</Data>
        <Data AD_Column_ID="144" Column="AD_Key">87238</Data>
        <Data AD_Column_ID="142" Column="AD_Reference_ID">54044</Data>
        <Data AD_Column_ID="562" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="560" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84392" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="40" StepType="AD">
      <PO AD_Table_ID="102" Action="U" Record_ID="54044" Table="AD_Reference">
        <Data AD_Column_ID="130" Column="Name" oldValue="RelType C_Invoice =&gt; FM_Batch_ID Batchs">RelType C_Invoice =&gt; FM_Batch_ID Financial Batchs</Data>
      </PO>
    </Step>
    <Step SeqNo="50" StepType="AD">
      <PO AD_Table_ID="102" Action="I" Record_ID="54045" Table="AD_Reference">
        <Data AD_Column_ID="556" Column="Updated">2018-05-07 16:43:09.274</Data>
        <Data AD_Column_ID="553" Column="IsActive">true</Data>
        <Data AD_Column_ID="554" Column="Created">2018-05-07 16:43:09.274</Data>
        <Data AD_Column_ID="139" Column="ValidationType">T</Data>
        <Data AD_Column_ID="132" Column="Help" isNewNull="true"/>
        <Data AD_Column_ID="54355" Column="IsOrderByValue">false</Data>
        <Data AD_Column_ID="1180" Column="VFormat" isNewNull="true"/>
        <Data AD_Column_ID="130" Column="Name">RelType C_Invoice (Customer) &lt;= FM_Batch_ID</Data>
        <Data AD_Column_ID="131" Column="Description">Finds C_Invoice_IDs for a given FM_Batch_ID</Data>
        <Data AD_Column_ID="129" Column="AD_Reference_ID">54045</Data>
        <Data AD_Column_ID="363" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="364" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="6486" Column="EntityType">FMS</Data>
        <Data AD_Column_ID="557" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="555" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84393" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="60" StepType="AD">
      <PO AD_Table_ID="126" Action="I" Record_ID="0" Table="AD_Reference_Trl">
        <Data AD_Column_ID="280" Column="Name">RelType C_Invoice (Customer) &lt;= FM_Batch_ID</Data>
        <Data AD_Column_ID="666" Column="IsActive">true</Data>
        <Data AD_Column_ID="667" Column="Created">2018-05-07 16:43:10.219</Data>
        <Data AD_Column_ID="669" Column="Updated">2018-05-07 16:43:10.219</Data>
        <Data AD_Column_ID="283" Column="IsTranslated">false</Data>
        <Data AD_Column_ID="281" Column="Description">Finds C_Invoice_IDs for a given FM_Batch_ID</Data>
        <Data AD_Column_ID="282" Column="Help" isNewNull="true"/>
        <Data AD_Column_ID="1203" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="1202" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="670" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="279" Column="AD_Language">es_MX</Data>
        <Data AD_Column_ID="278" Column="AD_Reference_ID">54045</Data>
        <Data AD_Column_ID="668" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84394" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="70" StepType="AD">
      <PO AD_Table_ID="103" Action="I" Record_ID="54045" Table="AD_Ref_Table">
        <Data AD_Column_ID="559" Column="Created">2018-05-07 16:46:15.484</Data>
        <Data AD_Column_ID="561" Column="Updated">2018-05-07 16:46:15.484</Data>
        <Data AD_Column_ID="558" Column="IsActive">true</Data>
        <Data AD_Column_ID="2377" Column="IsValueDisplayed">false</Data>
        <Data AD_Column_ID="147" Column="OrderByClause" isNewNull="true"/>
        <Data AD_Column_ID="146" Column="WhereClause">EXISTS(SELECT 1 FROM FM_Transaction t
       INNER JOIN C_InvoiceLine il ON(il.C_InvoiceLine_ID = t.C_InvoiceLine_ID)
       WHERE t.FM_Batch_ID = @FM_Batch_ID@
	   AND il.C_Invoice_ID = C_Invoice.C_Invoice_ID)</Data>
        <Data AD_Column_ID="62120" Column="IsAlert">false</Data>
        <Data AD_Column_ID="62121" Column="DisplaySQL" isNewNull="true"/>
        <Data AD_Column_ID="62122" Column="IsDisplayIdentifier">false</Data>
        <Data AD_Column_ID="145" Column="AD_Display">3492</Data>
        <Data AD_Column_ID="7711" Column="EntityType">FMS</Data>
        <Data AD_Column_ID="367" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="368" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="143" Column="AD_Table_ID">318</Data>
        <Data AD_Column_ID="57270" Column="AD_Window_ID">167</Data>
        <Data AD_Column_ID="144" Column="AD_Key">3484</Data>
        <Data AD_Column_ID="142" Column="AD_Reference_ID">54045</Data>
        <Data AD_Column_ID="562" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="560" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84392" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="80" StepType="AD">
      <PO AD_Table_ID="104" Action="I" Record_ID="55172" Table="AD_Ref_List">
        <Data AD_Column_ID="564" Column="Created">2018-05-07 16:47:14.332</Data>
        <Data AD_Column_ID="566" Column="Updated">2018-05-07 16:47:14.332</Data>
        <Data AD_Column_ID="563" Column="IsActive">true</Data>
        <Data AD_Column_ID="200" Column="Value">BatchFromInvoiceCustomer</Data>
        <Data AD_Column_ID="150" Column="Description" isNewNull="true"/>
        <Data AD_Column_ID="152" Column="ValidFrom" isNewNull="true"/>
        <Data AD_Column_ID="149" Column="Name">Batch Transaction from Invoice (Customer)</Data>
        <Data AD_Column_ID="153" Column="ValidTo" isNewNull="true"/>
        <Data AD_Column_ID="7712" Column="EntityType">FMS</Data>
        <Data AD_Column_ID="148" Column="AD_Ref_List_ID">55172</Data>
        <Data AD_Column_ID="372" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="371" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="151" Column="AD_Reference_ID">53331</Data>
        <Data AD_Column_ID="565" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="567" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="84390" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="90" StepType="AD">
      <PO AD_Table_ID="136" Action="I" Record_ID="55172" Table="AD_Ref_List_Trl">
        <Data AD_Column_ID="706" Column="IsActive">true</Data>
        <Data AD_Column_ID="707" Column="Created">2018-05-07 16:47:15.334</Data>
        <Data AD_Column_ID="709" Column="Updated">2018-05-07 16:47:15.334</Data>
        <Data AD_Column_ID="338" Column="Name">Batch Transaction from Invoice (Customer)</Data>
        <Data AD_Column_ID="340" Column="IsTranslated">false</Data>
        <Data AD_Column_ID="339" Column="Description" isNewNull="true"/>
        <Data AD_Column_ID="1216" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="1215" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="710" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="708" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="336" Column="AD_Ref_List_ID">55172</Data>
        <Data AD_Column_ID="337" Column="AD_Language">es_MX</Data>
        <Data AD_Column_ID="84391" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="100" StepType="AD">
      <PO AD_Table_ID="136" Action="U" Record_ID="55172" Table="AD_Ref_List_Trl">
        <Data AD_Column_ID="338" Column="Name" oldValue="Batch Transaction from Invoice (Customer)">Lote de Transacciones de Documento por Cobrar</Data>
        <Data AD_Column_ID="336" Column="AD_Ref_List_ID" oldValue="55172">55172</Data>
        <Data AD_Column_ID="337" Column="AD_Language" oldValue="es_MX">es_MX</Data>
      </PO>
    </Step>
    <Step SeqNo="110" StepType="AD">
      <PO AD_Table_ID="104" Action="I" Record_ID="55173" Table="AD_Ref_List">
        <Data AD_Column_ID="564" Column="Created">2018-05-07 16:48:03.414</Data>
        <Data AD_Column_ID="566" Column="Updated">2018-05-07 16:48:03.414</Data>
        <Data AD_Column_ID="563" Column="IsActive">true</Data>
        <Data AD_Column_ID="200" Column="Value">InvoiceCustomerFromBatch</Data>
        <Data AD_Column_ID="150" Column="Description" isNewNull="true"/>
        <Data AD_Column_ID="152" Column="ValidFrom" isNewNull="true"/>
        <Data AD_Column_ID="149" Column="Name">Invoice (Customer) from Batch Transaction</Data>
        <Data AD_Column_ID="153" Column="ValidTo" isNewNull="true"/>
        <Data AD_Column_ID="7712" Column="EntityType">FMS</Data>
        <Data AD_Column_ID="148" Column="AD_Ref_List_ID">55173</Data>
        <Data AD_Column_ID="372" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="371" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="151" Column="AD_Reference_ID">53331</Data>
        <Data AD_Column_ID="565" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="567" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="84390" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="120" StepType="AD">
      <PO AD_Table_ID="136" Action="I" Record_ID="55173" Table="AD_Ref_List_Trl">
        <Data AD_Column_ID="706" Column="IsActive">true</Data>
        <Data AD_Column_ID="707" Column="Created">2018-05-07 16:48:04.414</Data>
        <Data AD_Column_ID="709" Column="Updated">2018-05-07 16:48:04.414</Data>
        <Data AD_Column_ID="338" Column="Name">Invoice (Customer) from Batch Transaction</Data>
        <Data AD_Column_ID="340" Column="IsTranslated">false</Data>
        <Data AD_Column_ID="339" Column="Description" isNewNull="true"/>
        <Data AD_Column_ID="1216" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="1215" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="710" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="708" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="336" Column="AD_Ref_List_ID">55173</Data>
        <Data AD_Column_ID="337" Column="AD_Language">es_MX</Data>
        <Data AD_Column_ID="84391" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="130" StepType="AD">
      <PO AD_Table_ID="136" Action="U" Record_ID="55173" Table="AD_Ref_List_Trl">
        <Data AD_Column_ID="338" Column="Name" oldValue="Invoice (Customer) from Batch Transaction">Documento por Cobrar de Lote de Transacciones</Data>
        <Data AD_Column_ID="336" Column="AD_Ref_List_ID" oldValue="55173">55173</Data>
        <Data AD_Column_ID="337" Column="AD_Language" oldValue="es_MX">es_MX</Data>
      </PO>
    </Step>
    <Step SeqNo="140" StepType="AD">
      <PO AD_Table_ID="53246" Action="I" Record_ID="50057" Table="AD_RelationType">
        <Data AD_Column_ID="58575" Column="Created">2018-05-07 16:48:53.044</Data>
        <Data AD_Column_ID="58578" Column="IsActive">true</Data>
        <Data AD_Column_ID="58580" Column="Updated">2018-05-07 16:48:53.044</Data>
        <Data AD_Column_ID="58577" Column="Description" isNewNull="true"/>
        <Data AD_Column_ID="58579" Column="Name">Invoice (Customer) &lt;-&gt; Batch</Data>
        <Data AD_Column_ID="58582" Column="AD_Reference_Source_ID">54044</Data>
        <Data AD_Column_ID="58583" Column="AD_Reference_Target_ID">54045</Data>
        <Data AD_Column_ID="58584" Column="IsDirected">false</Data>
        <Data AD_Column_ID="58585" Column="Role_Source">BatchFromInvoiceCustomer</Data>
        <Data AD_Column_ID="58586" Column="Role_Target">InvoiceCustomerFromBatch</Data>
        <Data AD_Column_ID="58587" Column="Type">I</Data>
        <Data AD_Column_ID="58571" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="58572" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="58574" Column="AD_RelationType_ID">50057</Data>
        <Data AD_Column_ID="58581" Column="UpdatedBy">100</Data>
        <Data AD_Column_ID="58576" Column="CreatedBy">100</Data>
        <Data AD_Column_ID="84396" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
  </Migration>
</Migrations>
